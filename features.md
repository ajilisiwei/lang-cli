# 语言学习终端

## v0.1

###  描述

这是一个支持多种语言的打字学习终端工具，用户可以在终端中进行不同语言的单词、短语、句子、文章等的打字练习。

### 开发实现技术要求
- 使用 golang 实现
- 模块划分要求清晰，易管理和维护
- 最后编译成名叫 lang-cli 的终端工具，需要支持多系统平台

### 支持的的功能
- 支持lang,practice,manage等一级子命令.
- 每个一级子命令对应一个模块。
- lang提供支持的练习语言列表。有 ls,st二级子命令。
- practice提供练习功能。有 words,phrases,sentences,articles 等二级子命令。
- manage提供资源管理功能。有 delete, import 等二级子命令。
- 所有的一级子命令均支持q退出并返回上一级
- 输入 lang-cli 需要列出上面一级子命令列表，通过上下箭头可选择，并回车选中

### lang 模块功能

#### ls
1. 是 list 的意思。能列出所支持的练习语言的列表。
2. 支持的语言列表从配置文件config.yaml里面的languages数组里读取，比如['english','japanese',...]。
3. 进入支持语言列表之后，可以通过上下箭头切换要进行练习的语言。
4. 如果是当前已选中的语言，前面需要有"·"做标志；

#### st
1. 是 switch to 的意思。
2. 切换练习语言的命令，比如 lang-cli lang st japanese。
3. 切换的语言必须是ls中支持的语言。
4. 需要支持tab键的自动补全。比如 lang-cli lang st ja 按tab需要自动补全为 lang-cli lang st japanese。

### practice 模块功能

#### words
1. 是 words 的意思。
2. 单词练习功能。
3. 从项目的对应语言的 words 文件夹里读取单词列表，以文件名作为单词列表的标识。
4. 单词列表文件的内容格式为：单词 ->> 注释及发音等信息，每个单词占一行。分隔符为" ->> "，左边是单词，右边是单词的注释及发音等信息。
5. 单词列表文件的内容可以为空，即没有单词和翻译的情况。
6. 选中 words 后，会从当前日期的单词列表文件里读取单词列表。
7. 如果单词列表文件不存在，会提示用户创建一个新的单词列表文件。
8. 选中列表中的一项后，进行单词的练习。
9. 单词练习时，会随机从单词列表中取出一个单词，要求用户输入单词的正确拼写。
10. 用户输入单词并回车后，如果用户输入的单词拼写正确，会显示单词的翻译；如果拼写错误，会提示用户重新输入。
11. 下一个单词的出现顺序可通过配置文件config.yaml里的words里的next_one_order参数来配置，默认值为random，即随机出现下一个单词；如果配置为sequential，即顺序出现下一个单词。
12. 输入正确后是否显示对应的翻译可通过配置文件config.yaml里的words里的show_translation参数来配置，默认值为true。
13. 单词练习可以无限进行，直到用户选择退出。

#### phrases
1. 是 phrases 的意思。
2. 短语练习功能。
3. 从项目的对应语言的 phrases 文件夹里读取短语列表，以文件名作为短语列表的标识。
4. 短语列表文件的内容格式为：短语 ->> 翻译，每个短语占一行。分隔符为" ->> "，左边是短语，右边是翻译。
5. 短语列表文件的内容可以为空，即没有短语和翻译的情况。
6. 选中 phrases 后，会从当前语言的短语列表文件里读取短语列表。
7. 如果短语列表文件不存在，会提示用户创建一个新的短语列表文件。
8. 选中列表中的一项后，进行短语的练习。
9. 短语练习时，会随机从短语列表中取出一个短语，要求用户输入短语的正确拼写。
10. 用户输入短语并回车后，如果用户输入的短语拼写正确，会根据配置文件config.yaml里的phrases里的show_translation参数来判断是否显示对应的翻译；如果配置为true，会显示短语的翻译；如果配置为false，会提示用户重新输入。
11. 输入正确后是否显示对应的翻译可通过配置文件config.yaml里的phrases里的show_translation参数来配置，默认值为true。
12. 短语的下一句出现的顺序可通过配置文件config.yaml里的phrases里的next_one_order参数来配置，默认值为random，即随机出现下一句；如果配置为sequential，即顺序出现下一句。
13. 短语练习可以无限进行，直到用户选择退出。

#### sentences
1. 是 sentences 的意思。
2. 句子练习功能。
3. 从项目的对应语言的 sentences 文件夹里读取句子列表，以文件名作为句子列表的标识。
4. 句子列表文件的内容格式为：句子 ->> 翻译，每个句子占一行。分隔符为" ->> "，左边是句子，右边是翻译。
5. 句子列表文件的内容可以为空，即没有句子和翻译的情况。
6. 选中 sentences 后，会从当前语言的句子列表文件里读取句子列表。
7. 如果句子列表文件不存在，会提示用户创建一个新的句子列表文件。
8. 选中列表中的一项后，进行句子的练习。
9. 句子练习时，会随机从句子列表中取出一个句子，要求用户输入句子的正确拼写。
10. 用户输入句子并回车后，如果用户输入的句子拼写正确，会根据配置文件config.yaml里的sentences里的show_translation参数来判断是否显示对应的翻译；如果配置为true，会显示句子的翻译；如果配置为false，会提示用户重新输入。
11. 输入正确后是否显示对应的翻译可通过配置文件config.yaml里的sentences里的show_translation参数来配置，默认值为true。
12. 句子的下一句出现的顺序可通过配置文件config.yaml里的sentences里的next_one_order参数来配置，默认值为random，即随机出现下一句；如果配置为sequential，即顺序出现下一句。
13. 句子练习可以无限进行，直到用户选择退出。

#### articles
1. 选中 articles 后，会从项目的对应语言的 articles 文件夹里读取文章列表，以文件名作为文章列表的标识。
2. 选中列表中的一项后，进行文章的练习。
3. 文章练习时，会以文章对应的txt文件中的内容一行一行的进行练习。
4. 系统会先展示文章的第一行，要求用户输入这行文章的正确拼写。
5. 用户输入文章并回车后，如果用户输入的文章拼写正确，会根据配置文件config.yaml里的articles里的show_translation参数来判断是否显示对应的翻译；如果配置为true，会展示单词的翻译；如果配置为false，会展示下一行文章；如果拼写错误，会提示用户重新输入。
6. 文章练习可以无限进行，直到文章的所有行都被展示完毕。并提示用户文章练习已完成。回车之后回到文章列表主菜单。

### manage 模块功能

#### delete
1. 是 delete 的意思。
2. 删除资源的命令，比如 lang-cli manage delete words。
3. 删除的资源类型包括 words、phrases、sentences、articles。
4. 用户通过上下箭头切换要删除的资源类型，然后回车确认后，会进入对应资源的列表。
5. 用户在对应资源的列表中选中要删除的资源，然后回车后，会让用户确认是否删除选中的资源。
6. 删除完成后，会提示用户删除成功。
7. 如果删除失败，会提示用户删除失败。

#### import
1. 是 import 的意思。
2. 导入资源的命令，比如 lang-cli manage import words。
3. 导入的资源类型包括 words、phrases、sentences、articles。
4. 用户通过上下箭头切换要导入的资源类型，然后回车确认后，会进入对应资源的导入界面。
5. 在导入界面中，用户需要输入要导入的资源的文件名路径，文件名需要以.txt结尾。
6. 如果文件不存在，会提示用户文件不存在。
7. 如果文件存在，会提示用户确认是否导入该文件。
8. 用户确认导入后，会将文件中的内容导入到对应资源的列表中。
9. 导入完成后，会提示用户导入成功。并且导出成功的资源列表会被保存到项目的对应语言的资源列表文件中。
10. 如果导入失败，会提示用户导入失败。


## v0.2

### setting 模块功能

#### 匹配模式

1. 增加正确性匹配模式设置。读取 config.yaml 中的 correctness_match_mode 参数，需要有两种模式：第一种是需要完全匹配，第二种只需要匹配单词，忽略大小写和标点符号，两种模式的名称分别为：exact_match 和 word_match。
2. 如果 correctness_match_mode 配置为 exact_match，那么用户输入的必须完全匹配才能被认为是正确的。针对 words、phrases、sentences、articles 所有资源类型，都需要根据 correctness_match_mode 来判断用户输入是否正确。
3. 如果 correctness_match_mode 配置为 word_match，那么用户输入的只要包含单词就被认为是正确的，忽略大小写和标点符号。针对 words、phrases、sentences、articles 等所有资源类型。
4. 不论是上面的 exact_match 还是 word_match 匹配模式，如果用户输入不正确，都需要提示用户重新输入，并且需要使用高亮颜色标识出错的地方。

#### 顺序设置

1. 增加顺序设置。读取 config.yaml 中的 next_one_order 参数，需要有两种模式：第一种是随机顺序，第二种是顺序出现。
2. 如果 next_one_order 配置为 random，那么练习时，资源的下一句出现的顺序是随机的。针对 words、phrases、sentences 等所有资源类型，不包括 articles 资源。
3. 如果 next_one_order 配置为 sequential，那么练习时，资源的下一个出现的顺序是顺序的。针对 words、phrases、sentences 等所有资源类型，不包括 articles 资源。

## v0.3

### 增加输入键盘模拟声

1. 在 setting 模块增加 input_keyboard_sound 配置项，默认值为 false。
2. 如果 input_keyboard_sound 配置为 true，那么在用户输入时，会模拟键盘的按键声。

### 增加是否显示翻译的设置

1. 在 setting 模块增加 show_translation 配置项，默认值为 true。
2. 如果 show_translation 配置为 true，则在 words、phrases、sentences、articles 等资源的练习中，会展示单词的翻译；如果配置为 false，则不会展示单词的翻译。
3. 如果 show_translation 配置为 false，那么在 words、phrases、sentences、articles 等资源的练习中，会展示单词的拼写，而不会展示翻译文本。

## v0.4

### 单词分隔符

1. 增加单词与翻译注释文本的分隔符。
2. 将单词与翻译注释文本的分隔符除了" ->> ", 也要支持空格以及其他分隔符（制表符,":","/","："），比如："hello ->> 你好"，"hello 你好","hello：你好","hello:你好","hello/你好"等。
3. 以上所有分隔符规则同时只能有一种生效，不能同时存在多种分隔符, 比如优先判断" ->> "，然后是空格，"/"，":"，"："。
4. 导入的资源文件中的单词与翻译注释文本的分隔符，根据以上规则进行判断和解析。
5. 如果导入的资源文件中不存在以上任何一种分隔符，那么将第一个空格之前的文本作为单词，空格之后的文本作为翻译注释文本。

### 其他资源分隔符

1. 增加其他资源（phrases、sentences、articles）的分隔符。
2. 其他资源的分隔符与单词的分隔符规则相同，都是支持" ->> "外，也支持换行符，使用换行符的识别规则是：换行符之前的文本是原文，换行符之后的文本是翻译注释文本，之后必须要空一行。比如：
```
I’ll look into it and get back to you.
我会调查一下，然后回复你。

I’ll check and let you know.
我查一下再告知你。

I’ll find out and get back to you.
我了解一下再回复你。
```
这样会导入三个句子。如果两个空行之间只有一行文本，则单做该原文缺少翻译处理。

### 其他

1. 显示翻译时，不必显示作为原文和翻译注释文本分隔符的" ->> "。
2. 资源管理模块的说明文案不要混杂中英文，比如:"import句子资源"或"delete句子资源"等。

## v0.5

### 已有需求改动

1. 去掉各个练习页面的 "请输入:\n > 输入这里..." 这里的 ">"，包括所有类型的练习资源。

### 增加命令输入功能

1. 在各个练习页面，在请输入如果用户输入了"> "符号，那么会将"> "符号后面的文本作为命令执行，而不是作为用户输入的内容。
2. 当用户输入"> "时，在"> "之后，需要能自动补全出现以下命令选择下拉框；支持的命令有：
   - "exit"：退出当前练习会话。
   - "help"：显示当前练习会话的帮助信息。
   - "mark"：标记当前出现的单词、短语、句子或文章。
   - "unmark"：取消标记当前出现的单词、短语、句子或文章。
   - "favorite"：收藏当前出现的单词、短语、句子或文章。
   - "unfavorite"：取消收藏当前出现的单词、短语、句子或文章。
用户可通过下上箭头选中下拉框中的命令。
3. 各资源的练习页面底部需要展示上述命令的说明文案。

### 增加标记功能

1. 允许用户标志自己已经记住的词，下次练习时，会过滤掉已经记住的词。
2. 用户在练习时，当出现的单词用户觉得已经完全记住的话，用户可以输入"> mark"来标记单词，下次练习如果遇到该单词，就会直接跳过,按“> unmark”可以用来取消该单词的标记。
3. 标记的单词会被保存到 words 资源列表的“标记”文件中， words 资源列表将出现一个"标记"的项目。
4. 当用户在 words 资源列表中选择"标记"项目时，用户可通过输入"> unmark"来取消对该单词的标记。
5. 同理，phrases、sentences等资源类型也都增加标记和取消标记的功能。不支持文章类型的练习资源不支持标记和取消标记的功能。

### 增加收藏功能

1. 允许用户收藏自己认为重要的单词、短语、句子或文章。
2. 用户在练习时，当出现的单词用户觉得已经完全记住的话，用户可以输入"> favorite"来收藏单词、短语、句子或文章，下次练习如果遇到该单词、短语、句子或文章，就会直接跳过,按“> unfavorite”可以用来取消收藏单词、短语、句子或文章。
3. 收藏的单词、短语、句子或文章会被保存到 words、phrases、sentences、articles 资源列表的“收藏”文件中， words、phrases、sentences、articles 资源列表将出现一个"收藏"的项目。
4. 当用户在 words 资源列表中选择"收藏"项目时，用户可通过输入"> unfavorite"来取消对该单词、短语、句子或文章的收藏。
5. 同理，phrases、sentences、articles 等资源类型也都增加收藏和取消收藏的功能。
6. 需要注意的是，articles 类型收藏的实际上是文章中的句子，而不是文章本身。

## v0.6

### 顺序设置

1. 在原有的"顺序出现"和随机顺序"基础上，增加下一个单词的出现顺序 - "艾宾浩斯遗忘曲线"的选项。
2. 当用户选择"艾宾浩斯遗忘曲线"时，单词的顺序将按照该记忆规则出现。
3. 用户练习的单词和短语、句子等需要按"艾宾浩斯遗忘曲线"的规则做统计。

### 统计功能

1. 针对所有练习资源，增加练习统计功能。
2. 以天为单位统计用户练习的单词和短语、句子等。
3. 在主页面中的"设置"项目之后提供名叫"统计"的项目。
4. 统计功能需要记录用户练习的资源、时间、正确率等信息。
5. 统计功能需要提供方便查看的功能。


## v0.7

### 练习页面增加文件夹功能

1. 为之前所有的资源增加文件夹功能，系统默认的文件夹名为"默认"。
2. 资源的存储也需要按文件夹进行存储，"默认"的文件夹对应的目录名称是"default"。
1. 进入练习页面的时候，如果资源是来自文件夹的，也需要按文件夹组织展示。
2. 所有的资源(单词、短语、句子、文章)的都需要支持上述的功能。

### 导入资源管理页面增加文件夹功能

1. 导入资源的时候支持导入到指定的文件夹。
2. 导入资源时，在"请输入文件路径:"的上面增加一个"选择文件夹"的输入框，用户输入文字的时候需要自动补全已有的文件夹，并且用户可通过上下箭头选中想要的文件夹。
3. 如果用户输入的文件夹不存在，则自动创建。
4. 如果用户选择或者新建了新的文件夹，则自动将文件保存到该文件夹下。
5. 只能创建一级文件夹。
6. 如果用户没有输入文件夹，则默认保存在"默认"文件夹下。
6. 所有的资源(单词、短语、句子、文章)的导入都需要支持上述的功能。
7. 导入资源选择文件路径的时候，支持路径的自动补全，并且可以支持通过上下箭头选择不同的目录或者文件。

### 删除资源管理页面增加文件夹功能

1. 删除资源的页面，如果资源是来自文件夹的也需要按文件夹组织展示，否则显示在"默认"的文件夹下。
2. 如果选中的是文件夹，则回车后进入该文件夹。用户进入文件夹后再选中要删除的资源。只有该文件夹里面没有资源的时候，才允许删除文件夹，也即只能删除空文件夹，"默认”文件夹不能删除。
3. 删除空文件夹的时候，也需要弹出是否确认删除的提示选择。
4. 所有的资源(单词、短语、句子、文章)的删除都需要支持上述的功能。

## v0.8

### 增加从远程拉取资源

1. 增加从远程拉取资源的功能。
2. 当用户在资源管理模块中输入"import资源类型 资源URL"时，会从指定的 URL 拉取资源文件。
3. 资源URL可以是本地文件路径，也可以是远程文件路径（如 HTTP 或 HTTPS URL）。
4. 拉取的资源文件会被保存到项目的对应语言的资源列表文件中。
5. 如果拉取失败，会提示用户拉取失败。

### 增加远程同步功能

1. 在"设置"总览中增加"Github同步"功能。
2. "Github同步"功能页面里有"同步设置"和"同步"功能项。
3. "同步设置"页面里可以设置同步的仓库名称、用户名、密码。
4. "同步"功能项会拉取远程仓库的资源文件，并保存到本地。
5. 同步的资源包括所有系统自带的资源文件、用户的设置、用户自己导入的资源文件、用户创建的文件夹、用户资源文件的目录信息、用户的练习记录等等所有信息都要求同步。这样能确保用户在另外一台设备点击同步功能之后，能够看到自己之前导入的所有资源和所有练习情况。
6. 因为是基于GitHub的远程同步功能，如果出现同步不了的情况，需要提示用户详细而准确的错误信息和解决方案。

## 待定需求

### 增加单词发音

1. 增加单词发音功能。
2. 当用户在各类资源的练习中输入时，会根据单词的拼写，获取对应单词并调用有道词典的 API 来获取单词的发音。(https://dict.youdao.com/dictvoice?audio=dream)
3. 如果获取到了单词的发音，会播放该发音。










